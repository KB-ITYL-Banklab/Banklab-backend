<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.banklab.product.mapper.CreditLoanOptionMapper">
    
    <resultMap id="CreditLoanOptionResultMap" type="com.banklab.product.domain.creditloan.CreditLoanOption">
        <id property="id" column="id"/>
        <result property="dclsMonth" column="dcls_month"/>
        <result property="finCoNo" column="fin_co_no"/>
        <result property="finPrdtCd" column="fin_prdt_cd"/>
        <result property="crdtPrdtType" column="crdt_prdt_type"/>
        <result property="crdtLendRateType" column="crdt_lend_rate_type"/>
        <result property="crdtLendRateTypeNm" column="crdt_lend_rate_type_nm"/>
        <result property="crdtGrad1" column="crdt_grad_1"/>
        <result property="crdtGrad4" column="crdt_grad_4"/>
        <result property="crdtGrad5" column="crdt_grad_5"/>
        <result property="crdtGrad6" column="crdt_grad_6"/>
        <result property="crdtGrad10" column="crdt_grad_10"/>
        <result property="crdtGrad11" column="crdt_grad_11"/>
        <result property="crdtGrad12" column="crdt_grad_12"/>
        <result property="crdtGrad13" column="crdt_grad_13"/>
        <result property="crdtGradAvg" column="crdt_grad_avg"/>
        <result property="createdAt" column="created_at"/>
        <result property="updatedAt" column="updated_at"/>
    </resultMap>

    <insert id="insertCreditLoanOption" parameterType="com.banklab.product.domain.creditloan.CreditLoanOption">
        INSERT INTO credit_loan_option (
            dcls_month, fin_co_no, fin_prdt_cd, crdt_prdt_type,
            crdt_lend_rate_type, crdt_lend_rate_type_nm,
            crdt_grad_1, crdt_grad_4, crdt_grad_5, crdt_grad_6,
            crdt_grad_10, crdt_grad_11, crdt_grad_12, crdt_grad_13,
            crdt_grad_avg, created_at, updated_at
        ) VALUES (
            #{dclsMonth}, #{finCoNo}, #{finPrdtCd}, #{crdtPrdtType},
            #{crdtLendRateType}, #{crdtLendRateTypeNm},
            #{crdtGrad1}, #{crdtGrad4}, #{crdtGrad5}, #{crdtGrad6},
            #{crdtGrad10}, #{crdtGrad11}, #{crdtGrad12}, #{crdtGrad13},
            #{crdtGradAvg}, NOW(), NOW()
        )
    </insert>

    <select id="findAllCreditLoanOptions" resultMap="CreditLoanOptionResultMap">
        SELECT 
            id, dcls_month, fin_co_no, fin_prdt_cd, crdt_prdt_type,
            crdt_lend_rate_type, crdt_lend_rate_type_nm,
            crdt_grad_1, crdt_grad_4, crdt_grad_5, crdt_grad_6,
            crdt_grad_10, crdt_grad_11, crdt_grad_12, crdt_grad_13,
            crdt_grad_avg, created_at, updated_at
        FROM credit_loan_option
        ORDER BY fin_co_no, fin_prdt_cd, crdt_lend_rate_type
    </select>
    <select id="findOptionsByProduct" resultType="com.banklab.product.domain.creditloan.CreditLoanOption">
        SELECT
            id,
            dcls_month as dclsMonth,
            fin_co_no as finCoNo,
            fin_prdt_cd as finPrdtCd,
            crdt_prdt_type as crdtPrdtType,
            crdt_lend_rate_type as crdtLendRateType,
            crdt_lend_rate_type_nm as crdtLendRateTypeNm,
            crdt_grad_1 as crdtGrad1,
            crdt_grad_4 as crdtGrad4,
            crdt_grad_5 as crdtGrad5,
            crdt_grad_6 as crdtGrad6,
            crdt_grad_10 as crdtGrad10,
            crdt_grad_11 as crdtGrad11,
            crdt_grad_12 as crdtGrad12,
            crdt_grad_13 as crdtGrad13,
            crdt_grad_avg as crdtGradAvg,
            created_at as createdAt,
            updated_at as updatedAt
        FROM credit_loan_option
        WHERE dcls_month = #{dclsMonth}
          AND fin_co_no = #{finCoNo}
          AND fin_prdt_cd = #{finPrdtCd}
        ORDER BY crdt_lend_rate_type

    </select>

    <select id="findByOptionKey" resultType="com.banklab.product.domain.creditloan.CreditLoanOption">
        SELECT
            id,
            dcls_month as dclsMonth,
            fin_co_no as finCoNo,
            fin_prdt_cd as finPrdtCd,
            crdt_prdt_type as crdtPrdtType,
            crdt_lend_rate_type as crdtLendRateType,
            crdt_lend_rate_type_nm as crdtLendRateTypeNm,
            crdt_grad_1 as crdtGrad1,
            crdt_grad_4 as crdtGrad4,
            crdt_grad_5 as crdtGrad5,
            crdt_grad_6 as crdtGrad6,
            crdt_grad_10 as crdtGrad10,
            crdt_grad_11 as crdtGrad11,
            crdt_grad_12 as crdtGrad12,
            crdt_grad_13 as crdtGrad13,
            crdt_grad_avg as crdtGradAvg,
            created_at as createdAt,
            updated_at as updatedAt
        FROM credit_loan_option
        WHERE dcls_month = #{dclsMonth}
          AND fin_co_no = #{finCoNo}
          AND fin_prdt_cd = #{finPrdtCd}
          AND crdt_prdt_type = #{crdtPrdtType}
          AND crdt_lend_rate_type = #{crdtLendRateType}
    </select>

    <update id="updateCreditLoanOption" parameterType="com.banklab.product.domain.creditloan.CreditLoanOption">
        UPDATE credit_loan_option SET
            dcls_month = #{dclsMonth},
            fin_co_no = #{finCoNo},
            fin_prdt_cd = #{finPrdtCd},
            crdt_prdt_type = #{crdtPrdtType},
            crdt_lend_rate_type = #{crdtLendRateType},
            crdt_lend_rate_type_nm = #{crdtLendRateTypeNm},
            crdt_grad_1 = #{crdtGrad1},
            crdt_grad_4 = #{crdtGrad4},
            crdt_grad_5 = #{crdtGrad5},
            crdt_grad_6 = #{crdtGrad6},
            crdt_grad_10 = #{crdtGrad10},
            crdt_grad_11 = #{crdtGrad11},
            crdt_grad_12 = #{crdtGrad12},
            crdt_grad_13 = #{crdtGrad13},
            crdt_grad_avg = #{crdtGradAvg},
            updated_at = NOW()
        WHERE id = #{id}
    </update>

    <delete id="deleteAllCreditLoanOptions">
        DELETE FROM credit_loan_option
    </delete>

</mapper>

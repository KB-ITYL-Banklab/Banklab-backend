<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.banklab.product.mapper.CreditLoanProductMapper">
    <insert id="insertCreditLoanProduct" parameterType="com.banklab.product.domain.creditloan.CreditLoanProduct"
            useGeneratedKeys="true" keyProperty="id">
        INSERT INTO credit_loan_product (
            dcls_month, fin_co_no, kor_co_nm, fin_prdt_cd, fin_prdt_nm, join_way,
            crdt_prdt_type, crdt_prdt_type_nm, cb_name, dcls_strt_day, dcls_end_day, fin_co_subm_day, created_at, updated_at
        ) VALUES (
            #{dclsMonth}, #{finCoNo}, #{korCoNm}, #{finPrdtCd}, #{finPrdtNm}, #{joinWay},
            #{crdtPrdtType}, #{crdtPrdtTypeNm}, #{cbName}, #{dclsStrtDay}, #{dclsEndDay}, #{finCoSubmDay},
            NOW(), NOW()
        )
    </insert>
    <select id="findAllCreditLoanProducts" resultType="com.banklab.product.domain.creditloan.CreditLoanProduct">
        SELECT * FROM credit_loan_product
    </select>
    <delete id="deleteAllCreditLoanProducts">
        DELETE FROM credit_loan_product
    </delete>
    <select id="findByProductKey" resultType="com.banklab.product.domain.creditloan.CreditLoanProduct">
        SELECT 
            id,
            dcls_month as dclsMonth,
            fin_co_no as finCoNo,
            kor_co_nm as korCoNm,
            fin_prdt_cd as finPrdtCd,
            fin_prdt_nm as finPrdtNm,
            join_way as joinWay,
            crdt_prdt_type as crdtPrdtType,
            crdt_prdt_type_nm as crdtPrdtTypeNm,
            cb_name as cbName,
            dcls_strt_day as dclsStrtDay,
            dcls_end_day as dclsEndDay,
            fin_co_subm_day as finCoSubmDay,
            created_at as createdAt,
            updated_at as updatedAt
        FROM credit_loan_product
        WHERE dcls_month = #{dclsMonth}
          AND fin_co_no = #{finCoNo}
          AND fin_prdt_cd = #{finPrdtCd}
    </select>

    <select id="findById" resultType="com.banklab.product.domain.creditloan.CreditLoanProduct">
        SELECT 
            id,
            dcls_month as dclsMonth,
            fin_co_no as finCoNo,
            kor_co_nm as korCoNm,
            fin_prdt_cd as finPrdtCd,
            fin_prdt_nm as finPrdtNm,
            join_way as joinWay,
            crdt_prdt_type as crdtPrdtType,
            crdt_prdt_type_nm as crdtPrdtTypeNm,
            cb_name as cbName,
            dcls_strt_day as dclsStrtDay,
            dcls_end_day as dclsEndDay,
            fin_co_subm_day as finCoSubmDay,
            created_at as createdAt,
            updated_at as updatedAt
        FROM credit_loan_product
        WHERE id = #{id}
    </select>

    <update id="updateCreditLoanProduct" parameterType="com.banklab.product.domain.creditloan.CreditLoanProduct">
        UPDATE credit_loan_product SET
            dcls_month = #{dclsMonth},
            fin_co_no = #{finCoNo},
            kor_co_nm = #{korCoNm},
            fin_prdt_cd = #{finPrdtCd},
            fin_prdt_nm = #{finPrdtNm},
            join_way = #{joinWay},
            crdt_prdt_type = #{crdtPrdtType},
            crdt_prdt_type_nm = #{crdtPrdtTypeNm},
            cb_name = #{cbName},
            dcls_strt_day = #{dclsStrtDay},
            dcls_end_day = #{dclsEndDay},
            fin_co_subm_day = #{finCoSubmDay},
            updated_at = NOW()
        WHERE id = #{id}
    </update>
</mapper>
